/*
	Source:
	van Creij, Maurice (2012). "useful.toggles.js: Simple collapsible content", version 20120606, http://www.woollymittens.nl/.

	License:
	This work is licensed under a Creative Commons Attribution 3.0 Unported License.

	Prerequisites:
	<script src="./js/useful.js"></script>
	<!--[if IE]>
		<script src="./js/html5.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
	<![endif]-->
*/(function(e){"use strict";var t={};t={setup:function(e,n){n.outlets={};n.outlets.parent=e;n.index=n.index||0;t.automatic.setup(n);t.buttons.setup(n);t.articles.setup(n)},update:function(e){t.buttons.update(e);t.articles.update(e)},automatic:{setup:function(){},start:function(){},pause:function(){}},buttons:{setup:function(n){n.outlets.buttons=e.css.select(n.buttons,n.outlets.parent);for(var r=0,i=n.outlets.buttons.length;r<i;r+=1){n.outlets.buttons[r].className+=" "+n.classes.passive;t.buttons.events.clicked(n.outlets.buttons[r],r,n)}t.buttons.update(n)},events:{clicked:function(n,r,i){e.events.add(n,"click",function(e){t.buttons.change(e,r,i)})}},change:function(n,r,i){i.index=r;t.update(i);e.events.cancel(n)},update:function(e){var t=new RegExp(e.classes.passive,"gi"),n=new RegExp(e.classes.active,"gi");for(var r=0,i=e.outlets.buttons.length;r<i;r+=1)r===e.index?e.toggle?e.outlets.buttons[r].className=e.outlets.buttons[r].className.match(n)?e.outlets.buttons[r].className.replace(n,e.classes.passive):e.outlets.buttons[r].className.replace(t,e.classes.active):e.outlets.buttons[r].className=e.outlets.buttons[r].className.replace(t,e.classes.active):e.grouped&&(e.outlets.buttons[r].className=e.outlets.buttons[r].className.replace(n,e.classes.passive))}},articles:{setup:function(e){e.outlets.articles=[];for(var n=0,r=e.outlets.buttons.length;n<r;n+=1){if(e.outlets.buttons[n].href&&e.outlets.buttons[n].href.match("#"))e.outlets.articles[n]=document.getElementById(e.outlets.buttons[n].href.split("#")[1]);else if(e.outlets.buttons[n].value&&e.outlets.buttons[n].value.match("#"))e.outlets.articles[n]=document.getElementById(e.outlets.buttons[n].value.split("#")[1]);else{var i=e.outlets.buttons[n].nextSibling,s=0;while(i.nodeName.match(/#/)&&s<50){i=i.nextSibling;s+=1}e.outlets.articles[n]=i}e.outlets.articles[n].className+=" "+e.classes.closed}t.articles.update(e)},update:function(t){var n=new RegExp(t.classes.active,"gi");for(var r=0,i=t.outlets.buttons.length;r<i;r+=1)t.outlets.buttons[r].className.match(n)?e.css.setClass(t.outlets.articles[r],t.classes.closed,t.classes.open):e.css.setClass(t.outlets.articles[r],t.classes.open,t.classes.closed)}}};e.events=e.events||{};e.events.add=function(e,t,n){t=navigator.userAgent.match(/Firefox/i)&&t.match(/mousewheel/i)?"DOMMouseScroll":t;"addEventListener"in e?e.addEventListener(t,n,!1):"attachEvent"in e?e.attachEvent("on"+t,function(e){n(e)}):e["on"+t]=n};e.events.cancel=function(e){e&&(e.preventDefault?e.preventDefault():e.preventManipulation?e.preventManipulation():e.returnValue=!1)};e.models=e.models||{};e.models.clone=function(e){var t,n;if(typeof Object.create!="undefined")t=Object.create(e);else{n=function(){};n.prototype=e;t=new n}return t};e.models.trim=function(e){return e.replace(/^\s+|\s+$/g,"")};e.css=e.css||{};e.css.select=function(t,n){var r,i,s;n=n||document;t=typeof t=="string"?{rule:t,parent:n}:t;t.parent=t.parent||document;t.data=t.data||{};s=typeof document.querySelectorAll!="undefined"?t.parent.querySelectorAll(t.rule):typeof jQuery!="undefined"?jQuery(t.parent).find(t.rule).get():[];if(typeof t.handler=="undefined")return s;for(r=0,i=s.length;r<i;r+=1)t.handler(s[r],e.models.clone(t.data))};e.css.compatibility=function(){var e,t,n;t=document.createElement("div");typeof t.style.MozTransition!="undefined"&&(e="transitionend");try{document.createEvent("OTransitionEvent");e="oTransitionEnd"}catch(r){n=null}try{document.createEvent("WebKitTransitionEvent");e="webkitTransitionEnd"}catch(r){n=null}try{document.createEvent("transitionEvent");e="transitionend"}catch(r){n=null}t=n;return e};e.css.setClass=function(t,n,r,i,s,o){var u,a,f,l;i=i||function(){};f=e.css.compatibility();u=new RegExp(e.models.trim(n).replace(/ {2,}/g," ").split(" ").join("|"),"g");a=new RegExp(r,"g");if(typeof f!="undefined"){t.addEventListener(f,l=function(){i();t.removeEventListener(f,l,!0)},!0);t.className=e.models.trim(t.className.replace(u,"")+" "+r).replace(/ {2,}/g," ")}else if(typeof jQuery!="undefined"&&typeof jQuery.ui!="undefined"){s=s||500;o=o||"swing";jQuery(t).switchClass(n.replace(a,""),r,s,o,i)}else{t.className=e.models.trim(t.className.replace(u,"")+" "+r).replace(/ {2,}/g," ");i()}};e.toggles={};e.toggles.setup=t.setup})(window.useful=window.useful||{});